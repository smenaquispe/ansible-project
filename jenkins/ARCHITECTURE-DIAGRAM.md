# Arquitectura CI/CD - Diagrama de Flujo

## ğŸ—ï¸ Arquitectura General

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DEVELOPER                                   â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  CÃ³digo  â”‚      â”‚  Infra   â”‚      â”‚  Config  â”‚                 â”‚
â”‚  â”‚  src/    â”‚      â”‚ ansible/ â”‚      â”‚ .yml/.envâ”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚       â”‚                 â”‚                  â”‚                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                         â”‚                                           â”‚
â”‚                    git commit                                       â”‚
â”‚                         â”‚                                           â”‚
â”‚                    git push                                         â”‚
â”‚                         â–¼                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                    â”‚
        â–¼                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    GITHUB     â”‚                   â”‚   GITLAB      â”‚
â”‚               â”‚                   â”‚               â”‚
â”‚   Webhook     â”‚                   â”‚   Webhook     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                               â”‚
        â”‚         JENKINS CI/CD         â”‚
        â”‚                               â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚   Jenkinsfile Pipeline   â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                               â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚  â”‚ 1. Checkout & Detection  â”‚â”‚
        â”‚  â”‚                          â”‚â”‚
        â”‚  â”‚  - Git clone             â”‚â”‚
        â”‚  â”‚  - Detect changes:       â”‚â”‚
        â”‚  â”‚    â€¢ src/ â†’ CODE         â”‚â”‚
        â”‚  â”‚    â€¢ ansible/ â†’ INFRA    â”‚â”‚
        â”‚  â”‚    â€¢ config â†’ CONFIG     â”‚â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚             â”‚                 â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚  â”‚ 2. Setup Environment     â”‚â”‚
        â”‚  â”‚                          â”‚â”‚
        â”‚  â”‚  - Python 3.11           â”‚â”‚
        â”‚  â”‚  - uv install            â”‚â”‚
        â”‚  â”‚  - Dependencies sync     â”‚â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚             â”‚                 â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚  â”‚ 3. Run Tests             â”‚â”‚
        â”‚  â”‚    (if CODE_CHANGED)     â”‚â”‚
        â”‚  â”‚                          â”‚â”‚
        â”‚  â”‚  - pytest                â”‚â”‚
        â”‚  â”‚  - Coverage report       â”‚â”‚
        â”‚  â”‚  - Publish HTML          â”‚â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚             â”‚                 â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚  â”‚ 4. Build Docker Images   â”‚â”‚
        â”‚  â”‚    (if CODE_CHANGED)     â”‚â”‚
        â”‚  â”‚                          â”‚â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
        â”‚  â”‚  â”‚  Frontend (React)   â”‚ â”‚â”‚
        â”‚  â”‚  â”‚  Backend (Node.js)  â”‚ â”‚â”‚
        â”‚  â”‚  â”‚  Database (PG)      â”‚ â”‚â”‚
        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
        â”‚  â”‚                          â”‚â”‚
        â”‚  â”‚  Tags:                   â”‚â”‚
        â”‚  â”‚  - BUILD_NUMBER-COMMIT   â”‚â”‚
        â”‚  â”‚  - latest                â”‚â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚             â”‚                 â”‚
        â”‚             â–¼                 â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚  â”‚ 5. Push to GCR           â”‚â”‚
        â”‚  â”‚                          â”‚â”‚
        â”‚  â”‚  gcr.io/PROJECT/app:tag  â”‚â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚             â”‚                 â”‚
        â”‚             â–¼                 â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚  â”‚ 6. Verify/Create Cluster â”‚â”‚
        â”‚  â”‚                          â”‚â”‚
        â”‚  â”‚  gcloud check cluster    â”‚â”‚
        â”‚  â”‚  ansible create if neededâ”‚â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚             â”‚                 â”‚
        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
        â”‚    â”‚                 â”‚        â”‚
        â”‚    â–¼                 â–¼        â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚  â”‚Update  â”‚   â”‚   Deploy    â”‚â”‚
        â”‚  â”‚ Infra  â”‚   â”‚     App     â”‚â”‚
        â”‚  â”‚        â”‚   â”‚             â”‚â”‚
        â”‚  â”‚ (INFRA)â”‚   â”‚   (CODE)    â”‚â”‚
        â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
        â”‚               â–¼               â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚ 7. Verify Deployment   â”‚  â”‚
        â”‚  â”‚                        â”‚  â”‚
        â”‚  â”‚  - kubectl rollout     â”‚  â”‚
        â”‚  â”‚  - Health checks       â”‚  â”‚
        â”‚  â”‚  - Get Ingress IP      â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚               â”‚               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                               â”‚
        â”‚      GOOGLE CLOUD (GCP)       â”‚
        â”‚                               â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  Google Container        â”‚ â”‚
        â”‚  â”‚  Registry (GCR)          â”‚ â”‚
        â”‚  â”‚                          â”‚ â”‚
        â”‚  â”‚  â€¢ todo-frontend:tag     â”‚ â”‚
        â”‚  â”‚  â€¢ todo-backend:tag      â”‚ â”‚
        â”‚  â”‚  â€¢ todo-db:tag           â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                               â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  Google Kubernetes       â”‚ â”‚
        â”‚  â”‚  Engine (GKE)            â”‚ â”‚
        â”‚  â”‚                          â”‚ â”‚
        â”‚  â”‚  Namespace: todo-app     â”‚ â”‚
        â”‚  â”‚                          â”‚ â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
        â”‚  â”‚  â”‚  Frontend Pods (3) â”‚  â”‚ â”‚
        â”‚  â”‚  â”‚  â€¢ React + Nginx   â”‚  â”‚ â”‚
        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
        â”‚  â”‚                          â”‚ â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
        â”‚  â”‚  â”‚  Backend Pods (3)  â”‚  â”‚ â”‚
        â”‚  â”‚  â”‚  â€¢ Node.js API     â”‚  â”‚ â”‚
        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
        â”‚  â”‚                          â”‚ â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
        â”‚  â”‚  â”‚  Database (1)      â”‚  â”‚ â”‚
        â”‚  â”‚  â”‚  â€¢ PostgreSQL      â”‚  â”‚ â”‚
        â”‚  â”‚  â”‚  â€¢ PersistentVol   â”‚  â”‚ â”‚
        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
        â”‚  â”‚                          â”‚ â”‚
        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
        â”‚  â”‚  â”‚  Ingress/LB        â”‚  â”‚ â”‚
        â”‚  â”‚  â”‚  â€¢ External IP     â”‚  â”‚ â”‚
        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚               â”‚
                â”‚   END USERS   â”‚
                â”‚               â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Flujo Detallado por Tipo de Cambio

### ğŸ“ Cambio en CÃ³digo (src/)

```
Developer â†’ Git Push â†’ Webhook â†’ Jenkins
                                    â”‚
                                    â–¼
                            Detect: CODE_CHANGED
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼               â–¼               â–¼
                Tests         Build Images      Push GCR
                    â”‚               â”‚               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                            Deploy to GKE
                                    â”‚
                                    â–¼
                            Verify & Health Check
```

### ğŸ—ï¸ Cambio en Infraestructura (ansible/, kubernetes/)

```
Developer â†’ Git Push â†’ Webhook â†’ Jenkins
                                    â”‚
                                    â–¼
                            Detect: INFRA_CHANGED
                                    â”‚
                                    â–¼
                            Verify Cluster Exists
                                    â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                            â–¼               â–¼
                        Exists          Not Exists
                            â”‚               â”‚
                            â”‚               â–¼
                            â”‚         Create Cluster
                            â”‚               â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                            Update Infrastructure
                                    â”‚
                                    â–¼
                            Redeploy Application
                                    â”‚
                                    â–¼
                                  Verify
```

### âš™ï¸ Cambio en ConfiguraciÃ³n (config.env, group_vars/)

```
Developer â†’ Git Push â†’ Webhook â†’ Jenkins
                                    â”‚
                                    â–¼
                            Detect: CONFIG_CHANGED
                                    â”‚
                                    â–¼
                            Redeploy Application
                            (mismo cÃ³digo, nueva config)
                                    â”‚
                                    â–¼
                                  Verify
```

## ğŸ“Š Estados del Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PENDING    â”‚ â† Webhook recibido, esperando ejecutar
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   RUNNING    â”‚ â† Pipeline en ejecuciÃ³n
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â–º Tests running...
       â”œâ”€â”€â”€â”€â”€â–º Building images...
       â”œâ”€â”€â”€â”€â”€â–º Deploying...
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SUCCESS    â”‚ â† Todo completado exitosamente âœ…
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FAILURE    â”‚ â† Alguna etapa fallÃ³ âŒ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ABORTED    â”‚ â† Cancelado manualmente â¹ï¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Decisiones Condicionales

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Â¿QuÃ© se ejecuta?                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”œâ”€â–º CODE_CHANGED = true
                â”‚   â”œâ”€â–º Tests âœ…
                â”‚   â”œâ”€â–º Build Images âœ…
                â”‚   â”œâ”€â–º Push GCR âœ…
                â”‚   â””â”€â–º Deploy âœ…
                â”‚
                â”œâ”€â–º INFRA_CHANGED = true
                â”‚   â”œâ”€â–º Tests âŒ
                â”‚   â”œâ”€â–º Build Images âŒ
                â”‚   â”œâ”€â–º Update Cluster âœ…
                â”‚   â””â”€â–º Deploy âœ…
                â”‚
                â”œâ”€â–º CONFIG_CHANGED = true
                â”‚   â”œâ”€â–º Tests âŒ
                â”‚   â”œâ”€â–º Build Images âŒ
                â”‚   â”œâ”€â–º Update Cluster âŒ
                â”‚   â””â”€â–º Deploy âœ…
                â”‚
                â””â”€â–º NADA_CHANGED
                    â””â”€â–º Skip (solo en docs, README, etc)
```

## ğŸ” Credenciales y Secrets

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Jenkins Credentials                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”œâ”€â–º gcp-service-account-key
                 â”‚   â”‚
                 â”‚   â”œâ”€â–º AutenticaciÃ³n con GCP
                 â”‚   â”œâ”€â–º Acceso a GKE
                 â”‚   â””â”€â–º Push a GCR
                 â”‚
                 â”œâ”€â–º gcp-project-id
                 â”‚   â”‚
                 â”‚   â””â”€â–º ID del proyecto GCP
                 â”‚
                 â””â”€â–º github-token (opcional)
                     â”‚
                     â””â”€â–º Acceso a repos privados
```

## ğŸš¦ Pipeline Paralelo

En la etapa de build, se ejecutan en paralelo:

```
        Build Stage (Parallel)
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚         â”‚
    â–¼         â–¼         â–¼
Frontend  Backend  Database
  Image    Image     Image
    â”‚         â”‚         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
         (ContinÃºa)
```

## ğŸ“ˆ MÃ©tricas Capturadas

```
Jenkins captura:
â”œâ”€â–º Build Duration
â”œâ”€â–º Test Coverage %
â”œâ”€â–º Success/Failure Rate
â”œâ”€â–º Queue Time
â”œâ”€â–º Deploy Time
â””â”€â–º Artifact Size
```

## ğŸ”” Notificaciones (Futuro)

```
Pipeline Result
      â”‚
      â”œâ”€â–º SUCCESS âœ…
      â”‚   â”œâ”€â–º Slack: "Deploy exitoso"
      â”‚   â””â”€â–º Email: Team
      â”‚
      â””â”€â–º FAILURE âŒ
          â”œâ”€â–º Slack: "@team Deploy fallÃ³"
          â”œâ”€â–º Email: Team + On-Call
          â””â”€â–º PagerDuty (opcional)
```

## ğŸ“ Leyenda

```
â”Œâ”€â”€â”€â”€â”€â”
â”‚ Box â”‚  = Proceso/Etapa
â””â”€â”€â”€â”€â”€â”˜

  â”€â”€â”€â–º   = Flujo de datos

  â”œâ”€â”€â”€â–º  = DecisiÃ³n/Branch

   â–¼     = Siguiente paso

  (âœ…)   = Ejecuta

  (âŒ)   = No ejecuta

  [?]    = Condicional
```
